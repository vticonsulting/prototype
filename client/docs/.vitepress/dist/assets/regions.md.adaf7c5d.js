import{o as n,c as a,a as s}from"./app.efa7101f.js";const t='{"title":"RegionController","description":"","frontmatter":{},"headers":[{"level":2,"title":"CreateModel(modelType)","slug":"createmodel-modeltype"},{"level":2,"title":"GetServiceAreasForRegion JsonResult","slug":"getserviceareasforregion-jsonresult"},{"level":2,"title":"Index (GET /Region) \\"\\"","slug":"index-get-region"},{"level":3,"title":"Actions","slug":"actions"},{"level":2,"title":"CreateRegion (GET /Region/CreateRegion)","slug":"createregion-get-region-createregion"},{"level":2,"title":"CreateRegion(model, managerIds) (POST /Region/CreateRegion)","slug":"createregion-model-managerids-post-region-createregion"},{"level":2,"title":"EditRegion(id?) (POST /RegionEditRegion)","slug":"editregion-id-post-regioneditregion"},{"level":2,"title":"EditRegion(model, managerIds) (POST /Region/EditRegion)","slug":"editregion-model-managerids-post-region-editregion"},{"level":2,"title":"CreateServiceArea (GET /Region/CreateServiceArea)","slug":"createservicearea-get-region-createservicearea"},{"level":2,"title":"CreateServiceArea(model, techIds, formCollection) (POST /Region/CreateServiceArea)","slug":"createservicearea-model-techids-formcollection-post-region-createservicearea"},{"level":2,"title":"GetAvailableTechs(regionId, serviceAreaId) (POST)","slug":"getavailabletechs-regionid-serviceareaid-post"},{"level":2,"title":"ServiceAreaCapacity","slug":"serviceareacapacity"},{"level":2,"title":"ServiceAreaCapacityRead(request, serviceAreaId, companyId)","slug":"serviceareacapacityread-request-serviceareaid-companyid"},{"level":2,"title":"ServiceAreaCapacityCreate()","slug":"serviceareacapacitycreate"},{"level":2,"title":"ServiceAreaCapacityUpdate","slug":"serviceareacapacityupdate"},{"level":2,"title":"ServiceAreaCapacityDelete","slug":"serviceareacapacitydelete"},{"level":2,"title":"GetCompanyList","slug":"getcompanylist"},{"level":2,"title":"Hancock.Business.ServiceAreas.UCC","slug":"hancock-business-serviceareas-ucc"},{"level":3,"title":"ServiceRegionSetupUCC","slug":"serviceregionsetupucc"},{"level":2,"title":"Queries","slug":"queries"},{"level":3,"title":"Service Region","slug":"service-region"},{"level":3,"title":"Service Area Capacity","slug":"service-area-capacity"},{"level":3,"title":"Service Area Tech","slug":"service-area-tech"},{"level":3,"title":"Service Area","slug":"service-area"}],"relativePath":"regions.md","lastUpdated":1626889537959}',e={},p=s('<h1 id="regioncontroller"><a class="header-anchor" href="#regioncontroller" aria-hidden="true">#</a> RegionController</h1><ul><li>Permissions ViewRegionsMenu</li></ul><h2 id="createmodel-modeltype"><a class="header-anchor" href="#createmodel-modeltype" aria-hidden="true">#</a> CreateModel(modelType)</h2><ul><li>return <code>GetServiceRegionSetupUCC()</code>, if ServiceRegionSetupUCC</li><li>return <code>GetReadOnlyRoot()</code>, if EditServiceRegionUCC</li><li>return <code>GetServiceAreaSetupUCC()</code>, if ServiceAreaSetupUCC</li><li>else return <code>Activator.CreateInstance(modelType)</code></li></ul><h2 id="getserviceareasforregion-jsonresult"><a class="header-anchor" href="#getserviceareasforregion-jsonresult" aria-hidden="true">#</a> GetServiceAreasForRegion JsonResult</h2><h2 id="index-get-region"><a class="header-anchor" href="#index-get-region" aria-hidden="true">#</a> Index (GET /Region) &quot;&quot;</h2><h3 id="actions"><a class="header-anchor" href="#actions" aria-hidden="true">#</a> Actions</h3><ul><li>New Service Territory <ul><li>Validations <ul><li>Name is required</li><li></li></ul></li></ul></li></ul><h2 id="createregion-get-region-createregion"><a class="header-anchor" href="#createregion-get-region-createregion" aria-hidden="true">#</a> CreateRegion (GET /Region/CreateRegion)</h2><p>Redirects to Index</p><ul><li>Create/Edit</li></ul><h2 id="createregion-model-managerids-post-region-createregion"><a class="header-anchor" href="#createregion-model-managerids-post-region-createregion" aria-hidden="true">#</a> CreateRegion(model, managerIds) (POST /Region/CreateRegion)</h2><ul><li>Validates</li><li>Converts managerIds to List</li><li>Remove <code>RegionManagerId</code>, if List empty</li><li><code>GetServiceRegionMangerList(model.ServiceRegionId)</code></li><li>Loop through managerIds, if <code>ServiceRegionManagerList</code> contains</li></ul><h2 id="editregion-id-post-regioneditregion"><a class="header-anchor" href="#editregion-id-post-regioneditregion" aria-hidden="true">#</a> EditRegion(id?) (POST /RegionEditRegion)</h2><ul><li>if <code>id</code> return View for region <code>GetReadOnlyRoot(id.Value)</code></li><li>otherwise redirect to <code>Index</code></li></ul><h2 id="editregion-model-managerids-post-region-editregion"><a class="header-anchor" href="#editregion-model-managerids-post-region-editregion" aria-hidden="true">#</a> EditRegion(model, managerIds) (POST /Region/EditRegion)</h2><ul><li>if <code>ServiceRegion</code> is deleted or inActive <ul><li><code>ROServiceAreaList.GetROServiceAreaList(model.ServiceRegion.Id)</code></li><li><code>ProjectsList.GetNameValueList(modelServiceAreas.Select(sa =&gt; sa.Id).ToList())</code></li></ul></li></ul><h2 id="createservicearea-get-region-createservicearea"><a class="header-anchor" href="#createservicearea-get-region-createservicearea" aria-hidden="true">#</a> CreateServiceArea (GET /Region/CreateServiceArea)</h2><ul><li>Permissions (AddServiceArea)</li></ul><h2 id="createservicearea-model-techids-formcollection-post-region-createservicearea"><a class="header-anchor" href="#createservicearea-model-techids-formcollection-post-region-createservicearea" aria-hidden="true">#</a> CreateServiceArea(model, techIds, formCollection) (POST /Region/CreateServiceArea)</h2><ul><li>Permissions (AddServiceArea)</li></ul><h2 id="getavailabletechs-regionid-serviceareaid-post"><a class="header-anchor" href="#getavailabletechs-regionid-serviceareaid-post" aria-hidden="true">#</a> GetAvailableTechs(regionId, serviceAreaId) (POST)</h2><ul><li></li></ul><h2 id="serviceareacapacity"><a class="header-anchor" href="#serviceareacapacity" aria-hidden="true">#</a> ServiceAreaCapacity</h2><h2 id="serviceareacapacityread-request-serviceareaid-companyid"><a class="header-anchor" href="#serviceareacapacityread-request-serviceareaid-companyid" aria-hidden="true">#</a> ServiceAreaCapacityRead(request, serviceAreaId, companyId)</h2><ul><li>gridModels</li><li></li></ul><h2 id="serviceareacapacitycreate"><a class="header-anchor" href="#serviceareacapacitycreate" aria-hidden="true">#</a> ServiceAreaCapacityCreate()</h2><h2 id="serviceareacapacityupdate"><a class="header-anchor" href="#serviceareacapacityupdate" aria-hidden="true">#</a> ServiceAreaCapacityUpdate</h2><h2 id="serviceareacapacitydelete"><a class="header-anchor" href="#serviceareacapacitydelete" aria-hidden="true">#</a> ServiceAreaCapacityDelete</h2><h2 id="getcompanylist"><a class="header-anchor" href="#getcompanylist" aria-hidden="true">#</a> GetCompanyList</h2><p>GetRegionManagerAndLead GetAvailableRegionManagers</p><p>ServiceAreaPostalCodeRead ServiceAreaPostCodeCreate ServiceAreaPostalCodeUpdate ServiceAreaPostalCodeDestroy</p><p>AreStartTimeEndTimesValid</p><h2 id="hancock-business-serviceareas-ucc"><a class="header-anchor" href="#hancock-business-serviceareas-ucc" aria-hidden="true">#</a> Hancock.Business.ServiceAreas.UCC</h2><h3 id="serviceregionsetupucc"><a class="header-anchor" href="#serviceregionsetupucc" aria-hidden="true">#</a> ServiceRegionSetupUCC</h3><ul><li>RegionLeads</li><li>ServiceDirectors</li><li>ROServiceRegionList (&quot;Service Territories&quot;)</li><li>ServiceRegion</li></ul><p>GetServiceRegionSetupUCC() GetActiveServiceRegionSetupUCC(active) - ROServiceRegionList - ServiceRegion - RegionLeads - ServiceDirectors</p><hr><p>Regions - 2</p><h1 id="regioncontroller-1"><a class="header-anchor" href="#regioncontroller-1" aria-hidden="true">#</a> RegionController</h1><p><div class="table-of-contents"><ul><li><a href="#createmodel-modeltype">CreateModel(modelType)</a></li><li><a href="#getserviceareasforregion-jsonresult">GetServiceAreasForRegion JsonResult</a></li><li><a href="#index-get-region">Index (GET /Region) &quot;&quot;</a><ul><li><a href="#actions">Actions</a></li></ul></li><li><a href="#createregion-get-region-createregion">CreateRegion (GET /Region/CreateRegion)</a></li><li><a href="#createregion-model-managerids-post-region-createregion">CreateRegion(model, managerIds) (POST /Region/CreateRegion)</a></li><li><a href="#editregion-id-post-regioneditregion">EditRegion(id?) (POST /RegionEditRegion)</a></li><li><a href="#editregion-model-managerids-post-region-editregion">EditRegion(model, managerIds) (POST /Region/EditRegion)</a></li><li><a href="#createservicearea-get-region-createservicearea">CreateServiceArea (GET /Region/CreateServiceArea)</a></li><li><a href="#createservicearea-model-techids-formcollection-post-region-createservicearea">CreateServiceArea(model, techIds, formCollection) (POST /Region/CreateServiceArea)</a></li><li><a href="#getavailabletechs-regionid-serviceareaid-post">GetAvailableTechs(regionId, serviceAreaId) (POST)</a></li><li><a href="#serviceareacapacity">ServiceAreaCapacity</a></li><li><a href="#serviceareacapacityread-request-serviceareaid-companyid">ServiceAreaCapacityRead(request, serviceAreaId, companyId)</a></li><li><a href="#serviceareacapacitycreate">ServiceAreaCapacityCreate()</a></li><li><a href="#serviceareacapacityupdate">ServiceAreaCapacityUpdate</a></li><li><a href="#serviceareacapacitydelete">ServiceAreaCapacityDelete</a></li><li><a href="#getcompanylist">GetCompanyList</a></li><li><a href="#hancock-business-serviceareas-ucc">Hancock.Business.ServiceAreas.UCC</a><ul><li><a href="#serviceregionsetupucc">ServiceRegionSetupUCC</a></li></ul></li><li><a href="#queries">Queries</a><ul><li><a href="#service-region">Service Region</a></li><li><a href="#service-area-capacity">Service Area Capacity</a></li><li><a href="#service-area-tech">Service Area Tech</a></li><li><a href="#service-area">Service Area</a></li></ul></li></ul></div></p><h2 id="queries"><a class="header-anchor" href="#queries" aria-hidden="true">#</a> Queries</h2><h3 id="service-region"><a class="header-anchor" href="#service-region" aria-hidden="true">#</a> Service Region</h3><h4 id="fetch-id"><a class="header-anchor" href="#fetch-id" aria-hidden="true">#</a> <code>Fetch(id)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sa <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceRegions\n  <span class="token keyword">where</span> <span class="token class-name">sa</span><span class="token punctuation">.</span>Id <span class="token operator">==</span> id\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceRegionDTO</span>\n    <span class="token punctuation">{</span>\n      Id <span class="token operator">=</span> sa<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n      Name <span class="token operator">=</span> sa<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n      IsActive <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsActive<span class="token punctuation">,</span>\n      IsCatastropheRegion <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsCatastropheRegion<span class="token punctuation">,</span>\n      CreatedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n      CreatedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n      ModifiedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n      ModifiedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n      Timestamp <span class="token operator">=</span> sa<span class="token punctuation">.</span>RowVersion<span class="token punctuation">,</span>\n      RegionLeadId <span class="token operator">=</span> sa<span class="token punctuation">.</span>RegionLead<span class="token punctuation">,</span>\n      LeadName <span class="token operator">=</span> sa<span class="token punctuation">.</span>UserRegionLead<span class="token punctuation">.</span>FirstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> sa<span class="token punctuation">.</span>UserRegionLead<span class="token punctuation">.</span>LastName<span class="token punctuation">,</span>\n    IsDeleted <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsDeleted\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="fetch"><a class="header-anchor" href="#fetch" aria-hidden="true">#</a> <code>Fetch()</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sa <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceRegions\n  <span class="token keyword">where</span> <span class="token class-name">sa</span><span class="token punctuation">.</span>IsDeleted <span class="token operator">==</span> <span class="token boolean">false</span>\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceRegionDTO</span>\n  <span class="token punctuation">{</span>\n      Id <span class="token operator">=</span> sa<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n      Name <span class="token operator">=</span> sa<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n      IsActive <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsActive<span class="token punctuation">,</span>\n      IsCatastropheRegion <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsCatastropheRegion<span class="token punctuation">,</span>\n      CreatedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n      CreatedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n      ModifiedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n      ModifiedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n      Timestamp <span class="token operator">=</span> sa<span class="token punctuation">.</span>RowVersion<span class="token punctuation">,</span>\n      IsDeleted <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsDeleted\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="fetchforactiveserviceregions-active"><a class="header-anchor" href="#fetchforactiveserviceregions-active" aria-hidden="true">#</a> <code>FetchForActiveServiceRegions(active)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sa <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceRegions\n  <span class="token keyword">where</span> <span class="token class-name">sa</span><span class="token punctuation">.</span>IsActive <span class="token operator">==</span> active <span class="token operator">&amp;&amp;</span> sa<span class="token punctuation">.</span>IsDeleted <span class="token operator">==</span> <span class="token boolean">false</span>\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceRegionDTO</span>\n  <span class="token punctuation">{</span>\n      Id <span class="token operator">=</span> sa<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n      Name <span class="token operator">=</span> sa<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n      IsActive <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsActive<span class="token punctuation">,</span>\n      IsCatastropheRegion <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsCatastropheRegion<span class="token punctuation">,</span>\n      CreatedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n      CreatedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n      ModifiedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n      ModifiedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n      Timestamp <span class="token operator">=</span> sa<span class="token punctuation">.</span>RowVersion<span class="token punctuation">,</span>\n      IsDeleted <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsDeleted\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="fetchforregionlead-leadid"><a class="header-anchor" href="#fetchforregionlead-leadid" aria-hidden="true">#</a> <code>FetchForRegionLead(leadId)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sa <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceRegions\n  <span class="token keyword">where</span> <span class="token class-name">sa</span><span class="token punctuation">.</span>RegionLead <span class="token operator">==</span> leadId\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceRegionDTO</span>\n  <span class="token punctuation">{</span>\n      Id <span class="token operator">=</span> sa<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n      Name <span class="token operator">=</span> sa<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n      IsActive <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsActive<span class="token punctuation">,</span>\n      IsCatastropheRegion <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsCatastropheRegion<span class="token punctuation">,</span>\n      CreatedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n      CreatedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n      ModifiedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n      ModifiedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n      Timestamp <span class="token operator">=</span> sa<span class="token punctuation">.</span>RowVersion<span class="token punctuation">,</span>\n      RegionLeadId <span class="token operator">=</span> sa<span class="token punctuation">.</span>RegionLead<span class="token punctuation">,</span>\n      LeadName <span class="token operator">=</span> sa<span class="token punctuation">.</span>ServiceRegionManagers<span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ServiceRegionsManagerUser<span class="token punctuation">.</span>FirstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> sa<span class="token punctuation">.</span>ServiceRegionManagers<span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>ServiceRegionsManagerUser<span class="token punctuation">.</span>LastName<span class="token punctuation">,</span>\n      IsDeleted <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsDeleted\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="insert-serviceregiondto-item"><a class="header-anchor" href="#insert-serviceregiondto-item" aria-hidden="true">#</a> <code>Insert(ServiceRegionDTO item)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> newItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceRegion</span>\n<span class="token punctuation">{</span>\n    Name <span class="token operator">=</span> item<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n    IsActive <span class="token operator">=</span> item<span class="token punctuation">.</span>IsActive<span class="token punctuation">,</span>\n    IsCatastropheRegion <span class="token operator">=</span> item<span class="token punctuation">.</span>IsCatastropheRegion<span class="token punctuation">,</span>\n    CreatedOn <span class="token operator">=</span> item<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    CreatedBy <span class="token operator">=</span> item<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n\n    RegionLead <span class="token operator">=</span> item<span class="token punctuation">.</span>RegionLeadId<span class="token punctuation">,</span>\n    IsDeleted <span class="token operator">=</span> item<span class="token punctuation">.</span>IsDeleted\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\nctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceRegions<span class="token punctuation">.</span><span class="token function">AddObject</span><span class="token punctuation">(</span>newItem<span class="token punctuation">)</span><span class="token punctuation">;</span>\nctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nitem<span class="token punctuation">.</span>Id <span class="token operator">=</span> newItem<span class="token punctuation">.</span>Id<span class="token punctuation">;</span>\n</code></pre></div><h4 id="update-serviceregiondto-item"><a class="header-anchor" href="#update-serviceregiondto-item" aria-hidden="true">#</a> <code>Update(ServiceRegionDTO item)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> data <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> r <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceRegions\n  <span class="token keyword">where</span> <span class="token class-name">r</span><span class="token punctuation">.</span>Id <span class="token operator">==</span> item<span class="token punctuation">.</span>Id\n  <span class="token keyword">select</span> r\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\ndata<span class="token punctuation">.</span>Name <span class="token operator">=</span> item<span class="token punctuation">.</span>Name<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>IsCatastropheRegion <span class="token operator">=</span> item<span class="token punctuation">.</span>IsCatastropheRegion<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>IsActive <span class="token operator">=</span> item<span class="token punctuation">.</span>IsActive<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>CreatedOn <span class="token operator">=</span> item<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>CreatedBy <span class="token operator">=</span> item<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>RegionLead <span class="token operator">=</span> item<span class="token punctuation">.</span>RegionLeadId<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>IsDeleted <span class="token operator">=</span> item<span class="token punctuation">.</span>IsDeleted<span class="token punctuation">;</span>\n<span class="token class-name"><span class="token keyword">var</span></span> count <span class="token operator">=</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="delete-id"><a class="header-anchor" href="#delete-id" aria-hidden="true">#</a> <code>Delete(id)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> data <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> r <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceRegions\n  <span class="token keyword">where</span> <span class="token class-name">r</span><span class="token punctuation">.</span>Id <span class="token operator">==</span> id\n  <span class="token keyword">select</span> r\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="fetchforuser-userid"><a class="header-anchor" href="#fetchforuser-userid" aria-hidden="true">#</a> <code>FetchForUser(userId)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sr <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceRegions\n  <span class="token keyword">where</span> <span class="token class-name">sr</span><span class="token punctuation">.</span>IsActive <span class="token operator">&amp;&amp;</span> sr<span class="token punctuation">.</span>ServiceRegionManagers<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>UserId <span class="token operator">==</span> userId <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>ServiceRegionId <span class="token operator">==</span> sr<span class="token punctuation">.</span>Id<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> sr<span class="token punctuation">.</span>IsDeleted <span class="token operator">==</span> <span class="token boolean">false</span>\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceRegionDTO</span>\n  <span class="token punctuation">{</span>\n      Id <span class="token operator">=</span> sr<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n      Name <span class="token operator">=</span> sr<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n      IsActive <span class="token operator">=</span> sr<span class="token punctuation">.</span>IsActive<span class="token punctuation">,</span>\n      IsCatastropheRegion <span class="token operator">=</span> sr<span class="token punctuation">.</span>IsCatastropheRegion<span class="token punctuation">,</span>\n      CreatedBy <span class="token operator">=</span> sr<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n      CreatedOn <span class="token operator">=</span> sr<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n      ModifiedBy <span class="token operator">=</span> sr<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n      ModifiedOn <span class="token operator">=</span> sr<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n      Timestamp <span class="token operator">=</span> sr<span class="token punctuation">.</span>RowVersion<span class="token punctuation">,</span>\n      IsDeleted <span class="token operator">=</span> sr<span class="token punctuation">.</span>IsDeleted\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="fetchforsvt2-userid"><a class="header-anchor" href="#fetchforsvt2-userid" aria-hidden="true">#</a> FetchForSvt2(userId)</h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sr <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceRegions\n  <span class="token keyword">where</span> <span class="token class-name">sr</span><span class="token punctuation">.</span>IsActive <span class="token operator">&amp;&amp;</span> sr<span class="token punctuation">.</span>RegionLead <span class="token operator">==</span> userId <span class="token operator">&amp;&amp;</span> sr<span class="token punctuation">.</span>IsDeleted <span class="token operator">==</span> <span class="token boolean">false</span>\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceRegionDTO</span>\n  <span class="token punctuation">{</span>\n      Id <span class="token operator">=</span> sr<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n      Name <span class="token operator">=</span> sr<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n      IsActive <span class="token operator">=</span> sr<span class="token punctuation">.</span>IsActive<span class="token punctuation">,</span>\n      IsCatastropheRegion <span class="token operator">=</span> sr<span class="token punctuation">.</span>IsCatastropheRegion<span class="token punctuation">,</span>\n      CreatedBy <span class="token operator">=</span> sr<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n      CreatedOn <span class="token operator">=</span> sr<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n      ModifiedBy <span class="token operator">=</span> sr<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n      ModifiedOn <span class="token operator">=</span> sr<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n      Timestamp <span class="token operator">=</span> sr<span class="token punctuation">.</span>RowVersion<span class="token punctuation">,</span>\n      IsDeleted <span class="token operator">=</span> sr<span class="token punctuation">.</span>IsDeleted\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h3 id="service-area-capacity"><a class="header-anchor" href="#service-area-capacity" aria-hidden="true">#</a> Service Area Capacity</h3><h4 id="fetchbycompanyservicearea-serviceareaid-companyid"><a class="header-anchor" href="#fetchbycompanyservicearea-serviceareaid-companyid" aria-hidden="true">#</a> <code>FetchByCompanyServiceArea(serviceAreaId, companyId)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> serviceAreaCapacities <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaCapacities\n  <span class="token keyword">where</span> <span class="token class-name">serviceAreaCapacities</span><span class="token punctuation">.</span>ServiceAreaId <span class="token operator">==</span> serviceAreaId\n    <span class="token operator">&amp;&amp;</span> serviceAreaCapacities<span class="token punctuation">.</span>CompanyId <span class="token operator">==</span> companyId\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaCapacityDTO</span>\n  <span class="token punctuation">{</span>\n    Id <span class="token operator">=</span> serviceAreaCapacities<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n    CompanyId <span class="token operator">=</span> serviceAreaCapacities<span class="token punctuation">.</span>CompanyId<span class="token punctuation">,</span>\n    CreatedBy <span class="token operator">=</span> serviceAreaCapacities<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    CreatedOn <span class="token operator">=</span> serviceAreaCapacities<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    Capacity <span class="token operator">=</span> serviceAreaCapacities<span class="token punctuation">.</span>Capacity<span class="token punctuation">,</span>\n    ServiceAreaId <span class="token operator">=</span> serviceAreaCapacities<span class="token punctuation">.</span>ServiceAreaId<span class="token punctuation">,</span>\n    EndTime <span class="token operator">=</span> serviceAreaCapacities<span class="token punctuation">.</span>EndTime<span class="token punctuation">,</span>\n    StartTime <span class="token operator">=</span> serviceAreaCapacities<span class="token punctuation">.</span>StartTime\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="fetch-id-1"><a class="header-anchor" href="#fetch-id-1" aria-hidden="true">#</a> <code>Fetch(id)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sac <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaCapacities\n  <span class="token keyword">where</span> <span class="token class-name">sac</span><span class="token punctuation">.</span>Id <span class="token operator">==</span> id\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaCapacityDTO</span>\n  <span class="token punctuation">{</span>\n    Id <span class="token operator">=</span> sac<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n    CompanyId <span class="token operator">=</span> sac<span class="token punctuation">.</span>CompanyId<span class="token punctuation">,</span>\n    CreatedBy <span class="token operator">=</span> sac<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    CreatedOn <span class="token operator">=</span> sac<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    Capacity <span class="token operator">=</span> sac<span class="token punctuation">.</span>Capacity<span class="token punctuation">,</span>\n    ServiceAreaId <span class="token operator">=</span> sac<span class="token punctuation">.</span>ServiceAreaId<span class="token punctuation">,</span>\n    EndTime <span class="token operator">=</span> sac<span class="token punctuation">.</span>EndTime<span class="token punctuation">,</span>\n    StartTime <span class="token operator">=</span> sac<span class="token punctuation">.</span>StartTime\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="insert-serviceareacapacity"><a class="header-anchor" href="#insert-serviceareacapacity" aria-hidden="true">#</a> <code>Insert(serviceAreaCapacity)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaCapacity</span>\n  <span class="token punctuation">{</span>\n    Id <span class="token operator">=</span> serviceAreaCapacity<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n    CompanyId <span class="token operator">=</span> serviceAreaCapacity<span class="token punctuation">.</span>CompanyId<span class="token punctuation">,</span>\n    CreatedBy <span class="token operator">=</span> serviceAreaCapacity<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    CreatedOn <span class="token operator">=</span> serviceAreaCapacity<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    Capacity <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>serviceAreaCapacity<span class="token punctuation">.</span>Capacity<span class="token punctuation">,</span>\n    ServiceAreaId <span class="token operator">=</span> serviceAreaCapacity<span class="token punctuation">.</span>ServiceAreaId<span class="token punctuation">,</span>\n    EndTime <span class="token operator">=</span> serviceAreaCapacity<span class="token punctuation">.</span>EndTime<span class="token punctuation">,</span>\n    StartTime <span class="token operator">=</span> serviceAreaCapacity<span class="token punctuation">.</span>StartTime\n  <span class="token punctuation">}</span>\n\nctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaCapacities<span class="token punctuation">.</span><span class="token function">AddObject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>\nctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\nserviceAreaCapacity<span class="token punctuation">.</span>Id <span class="token operator">=</span> data<span class="token punctuation">.</span>Id<span class="token punctuation">;</span>\n</code></pre></div><h4 id="delete-serviceareacapacity"><a class="header-anchor" href="#delete-serviceareacapacity" aria-hidden="true">#</a> <code>Delete(serviceAreaCapacity)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> data <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">from</span> r <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaCapacities\n<span class="token keyword">where</span> <span class="token class-name">r</span><span class="token punctuation">.</span>Id <span class="token operator">==</span> id\n<span class="token keyword">select</span> r<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="update"><a class="header-anchor" href="#update" aria-hidden="true">#</a> <code>Update</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> data <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sac <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaCapacities\n  <span class="token keyword">where</span> <span class="token class-name">sac</span><span class="token punctuation">.</span>Id <span class="token operator">==</span> serviceAreaCapacity<span class="token punctuation">.</span>Id\n  <span class="token keyword">select</span> sac\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\ndata<span class="token punctuation">.</span>Id <span class="token operator">=</span> serviceAreaCapacity<span class="token punctuation">.</span>Id<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>CompanyId <span class="token operator">=</span> serviceAreaCapacity<span class="token punctuation">.</span>CompanyId<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>CreatedBy <span class="token operator">=</span> serviceAreaCapacity<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>CreatedOn <span class="token operator">=</span> serviceAreaCapacity<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>Capacity <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span>serviceAreaCapacity<span class="token punctuation">.</span>Capacity<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>ServiceAreaId <span class="token operator">=</span> serviceAreaCapacity<span class="token punctuation">.</span>ServiceAreaId<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>EndTime <span class="token operator">=</span> serviceAreaCapacity<span class="token punctuation">.</span>EndTime<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>StartTime <span class="token operator">=</span> serviceAreaCapacity<span class="token punctuation">.</span>StartTime<span class="token punctuation">;</span>\n<span class="token class-name"><span class="token keyword">var</span></span> count <span class="token operator">=</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h3 id="service-area-tech"><a class="header-anchor" href="#service-area-tech" aria-hidden="true">#</a> Service Area Tech</h3><h4 id="fetch-serviceareaid"><a class="header-anchor" href="#fetch-serviceareaid" aria-hidden="true">#</a> <code>Fetch(serviceAreaId)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sa <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaTechnicians\n  <span class="token keyword">where</span> <span class="token class-name">sa</span><span class="token punctuation">.</span>ServiceAreaId <span class="token operator">==</span> ServiceAreaId\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaTechDTO</span>\n  <span class="token punctuation">{</span>\n    ServiceAreaId <span class="token operator">=</span> sa<span class="token punctuation">.</span>ServiceAreaId<span class="token punctuation">,</span>\n    UserId <span class="token operator">=</span> sa<span class="token punctuation">.</span>UserId<span class="token punctuation">,</span>\n    CreatedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    CreatedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    ModifiedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    ModifiedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    Timestamp <span class="token operator">=</span> sa<span class="token punctuation">.</span>RowVersion\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="insert-serviceareatechdto-dto"><a class="header-anchor" href="#insert-serviceareatechdto-dto" aria-hidden="true">#</a> <code>Insert(ServiceAreaTechDTO dto)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaTechnician</span> <span class="token punctuation">{</span>\n  ServiceAreaId <span class="token operator">=</span> dto<span class="token punctuation">.</span>ServiceAreaId<span class="token punctuation">,</span>\n  UserId <span class="token operator">=</span> dto<span class="token punctuation">.</span>UserId<span class="token punctuation">,</span>\n  CreatedBy <span class="token operator">=</span> dto<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n  CreatedOn <span class="token operator">=</span> dto<span class="token punctuation">.</span>CreatedOn\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\nctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaTechnicians<span class="token punctuation">.</span><span class="token function">AddObject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token class-name"><span class="token keyword">var</span></span> count <span class="token operator">=</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="update-serviceareatechdto-dto"><a class="header-anchor" href="#update-serviceareatechdto-dto" aria-hidden="true">#</a> <code>Update(ServiceAreaTechDTO dto)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> data <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sa <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaTechnicians\n  <span class="token keyword">where</span> <span class="token class-name">sa</span><span class="token punctuation">.</span>ServiceAreaId <span class="token operator">==</span> dto<span class="token punctuation">.</span>ServiceAreaId\n    <span class="token operator">&amp;&amp;</span> sa<span class="token punctuation">.</span>UserId<span class="token operator">==</span>dto<span class="token punctuation">.</span>UserId\n  <span class="token keyword">select</span> sa\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">First</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\ndata<span class="token punctuation">.</span>ServiceAreaId <span class="token operator">=</span> dto<span class="token punctuation">.</span>ServiceAreaId<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>UserId <span class="token operator">=</span> dto<span class="token punctuation">.</span>UserId<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>CreatedBy <span class="token operator">=</span> dto<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>CreatedOn <span class="token operator">=</span> dto<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">;</span>\n\n<span class="token class-name"><span class="token keyword">var</span></span> count <span class="token operator">=</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="deleteallforarea-serviceareaid"><a class="header-anchor" href="#deleteallforarea-serviceareaid" aria-hidden="true">#</a> <code>DeleteAllForArea(ServiceAreaId)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> lstOfServiceAreasTechnicianss <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> r <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaTechnicians\n  <span class="token keyword">where</span> <span class="token class-name">r</span><span class="token punctuation">.</span>ServiceAreaId <span class="token operator">==</span> ServiceAreaId\n  <span class="token keyword">select</span> r\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="deleteallforuser-userid"><a class="header-anchor" href="#deleteallforuser-userid" aria-hidden="true">#</a> <code>DeleteAllForUser(userId)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> listOfUserServiceAreass <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> r <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaTechnicians\n  <span class="token keyword">where</span> <span class="token class-name">r</span><span class="token punctuation">.</span>UserId <span class="token operator">==</span> userId\n  <span class="token keyword">select</span> r\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="delete-userid-serviceareaid"><a class="header-anchor" href="#delete-userid-serviceareaid" aria-hidden="true">#</a> <code>Delete(userId, serviceAreaId)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> item <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> r <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaTechnicians\n  <span class="token keyword">where</span> <span class="token class-name">r</span><span class="token punctuation">.</span>UserId <span class="token operator">==</span> userId <span class="token operator">&amp;&amp;</span> r<span class="token punctuation">.</span>ServiceAreaId<span class="token operator">==</span> serviceAreaId\n  <span class="token keyword">select</span> r\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h3 id="service-area"><a class="header-anchor" href="#service-area" aria-hidden="true">#</a> Service Area</h3><h4 id="fetch-id-2"><a class="header-anchor" href="#fetch-id-2" aria-hidden="true">#</a> <code>Fetch(id)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sa <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreas\n  <span class="token keyword">where</span> <span class="token class-name">sa</span><span class="token punctuation">.</span>Id <span class="token operator">==</span> id\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaDTO</span>\n  <span class="token punctuation">{</span>\n    Id <span class="token operator">=</span> id<span class="token punctuation">,</span>\n    Name <span class="token operator">=</span> sa<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n    IsActive <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsActive<span class="token punctuation">,</span>\n    IsCatastropheArea <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsCatastropheArea<span class="token punctuation">,</span>\n    Street <span class="token operator">=</span> sa<span class="token punctuation">.</span>StreetAddress<span class="token punctuation">,</span>\n    City <span class="token operator">=</span> sa<span class="token punctuation">.</span>City<span class="token punctuation">,</span>\n    StateId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>sa<span class="token punctuation">.</span>StateId<span class="token punctuation">,</span>\n    PostalCode <span class="token operator">=</span> sa<span class="token punctuation">.</span>PostalCode<span class="token punctuation">,</span>\n    Latitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>Latitude<span class="token punctuation">,</span>\n    Longitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>Longitude<span class="token punctuation">,</span>\n    AddressLatitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>AddressLatitude<span class="token punctuation">,</span>\n    AddressLongitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>AddressLongitude<span class="token punctuation">,</span>\n    Radius <span class="token operator">=</span> sa<span class="token punctuation">.</span>Radius<span class="token punctuation">,</span>\n    ServiceRegionId <span class="token operator">=</span> sa<span class="token punctuation">.</span>ServiceRegionId<span class="token punctuation">,</span>\n    TimeZoneId <span class="token operator">=</span> sa<span class="token punctuation">.</span>TimeZoneId<span class="token punctuation">,</span>\n    CreatedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    CreatedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    ModifiedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    ModifiedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    Timestamp <span class="token operator">=</span> sa<span class="token punctuation">.</span>RowVersion<span class="token punctuation">,</span>\n    IsDeleted <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsDeleted\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="fetchforclosest-latitude-longitude"><a class="header-anchor" href="#fetchforclosest-latitude-longitude" aria-hidden="true">#</a> <code>FetchForClosest(latitude, longitude)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sa <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span><span class="token function">spGetClosestServiceAreas</span><span class="token punctuation">(</span>latitude<span class="token punctuation">,</span> longitude<span class="token punctuation">)</span>\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaDTO</span> <span class="token punctuation">{</span>\n    Id <span class="token operator">=</span> sa<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n    Name <span class="token operator">=</span> sa<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n    IsActive <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsActive<span class="token punctuation">,</span>\n    IsCatastropheArea <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsCatastropheArea<span class="token punctuation">,</span>\n    Street <span class="token operator">=</span> sa<span class="token punctuation">.</span>StreetAddress<span class="token punctuation">,</span>\n    City <span class="token operator">=</span> sa<span class="token punctuation">.</span>City<span class="token punctuation">,</span>\n    StateId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>sa<span class="token punctuation">.</span>StateId<span class="token punctuation">,</span>\n    PostalCode <span class="token operator">=</span> sa<span class="token punctuation">.</span>PostalCode<span class="token punctuation">,</span>\n    Latitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>Latitude<span class="token punctuation">,</span>\n    Longitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>Longitude<span class="token punctuation">,</span>\n    AddressLatitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>AddressLatitude<span class="token punctuation">,</span>\n    AddressLongitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>AddressLongitude<span class="token punctuation">,</span>\n    Radius <span class="token operator">=</span> sa<span class="token punctuation">.</span>Radius<span class="token punctuation">,</span>\n    ServiceRegionId <span class="token operator">=</span> sa<span class="token punctuation">.</span>ServiceRegionId<span class="token punctuation">,</span>\n    TimeZoneId <span class="token operator">=</span> sa<span class="token punctuation">.</span>TimeZoneId<span class="token punctuation">,</span>\n    CreatedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    CreatedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    ModifiedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    ModifiedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    Timestamp <span class="token operator">=</span> sa<span class="token punctuation">.</span>RowVersion<span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="fetchforsuperdashboard"><a class="header-anchor" href="#fetchforsuperdashboard" aria-hidden="true">#</a> <code>FetchForSuperDashboard()</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sa <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreas\n  <span class="token keyword">where</span> <span class="token class-name">sa</span><span class="token punctuation">.</span>IsActive <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>sa<span class="token punctuation">.</span>IsDeleted\n  <span class="token keyword">select</span> sa\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>\n  sa <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaDTO</span> <span class="token punctuation">{</span>\n    IsCatastropheArea <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsCatastropheArea<span class="token punctuation">,</span>\n    Radius <span class="token operator">=</span> sa<span class="token punctuation">.</span>Radius<span class="token punctuation">,</span>\n    AddressLatitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>AddressLatitude<span class="token punctuation">,</span>\n    AddressLongitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>AddressLongitude\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="fetch-1"><a class="header-anchor" href="#fetch-1" aria-hidden="true">#</a> <code>Fetch()</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sa <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreas\n  <span class="token keyword">where</span> <span class="token operator">!</span>sa<span class="token punctuation">.</span>IsDeleted\n  <span class="token keyword">select</span> sa\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token class-name"><span class="token keyword">int</span></span> userId <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToInt32</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ApplicationContext<span class="token punctuation">.</span>User<span class="token punctuation">.</span>Identity <span class="token keyword">as</span> <span class="token class-name">ClaimsIdentity</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Claims<span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>Type <span class="token operator">==</span> ClaimTypes<span class="token punctuation">.</span>NameIdentifier<span class="token punctuation">)</span><span class="token punctuation">.</span>Value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token class-name"><span class="token keyword">int</span></span> userLevel <span class="token operator">=</span> Convert<span class="token punctuation">.</span><span class="token function">ToInt32</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ApplicationContext<span class="token punctuation">.</span>User<span class="token punctuation">.</span>Identity <span class="token keyword">as</span> <span class="token class-name">ClaimsIdentity</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Claims<span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span>c <span class="token operator">=&gt;</span> c<span class="token punctuation">.</span>Type <span class="token operator">==</span> <span class="token string">&quot;UserLevel&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Value<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span>userLevel <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>Utility<span class="token punctuation">.</span>Enums<span class="token punctuation">.</span>Roles<span class="token punctuation">.</span>ServiceManager<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token class-name"><span class="token keyword">var</span></span> regions <span class="token operator">=</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceRegionManagers<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>srm <span class="token operator">=&gt;</span> srm<span class="token punctuation">.</span>UserId <span class="token operator">==</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  result <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> regions<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>r <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span>ServiceRegionId <span class="token operator">==</span> m<span class="token punctuation">.</span>ServiceRegionId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>userLevel <span class="token operator">==</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>Utility<span class="token punctuation">.</span>Enums<span class="token punctuation">.</span>Roles<span class="token punctuation">.</span>ServiceTech2<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  result <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>ServiceRegion<span class="token punctuation">.</span>RegionLead <span class="token operator">==</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> result<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>\n    sa <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaDTO</span> <span class="token punctuation">{</span>\n      Id <span class="token operator">=</span> sa<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n      Name <span class="token operator">=</span> sa<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n      IsActive <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsActive<span class="token punctuation">,</span>\n      IsCatastropheArea <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsCatastropheArea<span class="token punctuation">,</span>\n      Latitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>Latitude<span class="token punctuation">,</span>\n      Longitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>Longitude<span class="token punctuation">,</span>\n      Radius <span class="token operator">=</span> sa<span class="token punctuation">.</span>Radius<span class="token punctuation">,</span>\n      Street <span class="token operator">=</span> sa<span class="token punctuation">.</span>StreetAddress<span class="token punctuation">,</span>\n      City <span class="token operator">=</span> sa<span class="token punctuation">.</span>City<span class="token punctuation">,</span>\n      StateId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>sa<span class="token punctuation">.</span>StateId<span class="token punctuation">,</span>\n      PostalCode <span class="token operator">=</span> sa<span class="token punctuation">.</span>PostalCode<span class="token punctuation">,</span>\n      ServiceRegionId <span class="token operator">=</span> sa<span class="token punctuation">.</span>ServiceRegionId<span class="token punctuation">,</span>\n      TimeZoneId <span class="token operator">=</span> sa<span class="token punctuation">.</span>TimeZoneId<span class="token punctuation">,</span>\n      CreatedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n      CreatedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n      ModifiedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n      ModifiedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n      Timestamp <span class="token operator">=</span> sa<span class="token punctuation">.</span>RowVersion<span class="token punctuation">,</span>\n      AddressLatitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>AddressLatitude<span class="token punctuation">,</span>\n      AddressLongitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>AddressLongitude<span class="token punctuation">,</span>\n      IsDeleted <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsDeleted\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token class-name"><span class="token keyword">var</span></span> result2 <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>\n  sa <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaDTO</span> <span class="token punctuation">{</span>\n    Id <span class="token operator">=</span> sa<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n    Name <span class="token operator">=</span> sa<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n    IsActive <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsActive<span class="token punctuation">,</span>\n    IsCatastropheArea <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsCatastropheArea<span class="token punctuation">,</span>\n    Latitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>Latitude<span class="token punctuation">,</span>\n    Longitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>Longitude<span class="token punctuation">,</span>\n    AddressLatitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>AddressLatitude<span class="token punctuation">,</span>\n    AddressLongitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>AddressLongitude<span class="token punctuation">,</span>\n    Radius <span class="token operator">=</span> sa<span class="token punctuation">.</span>Radius<span class="token punctuation">,</span>\n    Street <span class="token operator">=</span> sa<span class="token punctuation">.</span>StreetAddress<span class="token punctuation">,</span>\n    City <span class="token operator">=</span> sa<span class="token punctuation">.</span>City<span class="token punctuation">,</span>\n    StateId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>sa<span class="token punctuation">.</span>StateId<span class="token punctuation">,</span>\n    PostalCode <span class="token operator">=</span> sa<span class="token punctuation">.</span>PostalCode<span class="token punctuation">,</span>\n    ServiceRegionId <span class="token operator">=</span> sa<span class="token punctuation">.</span>ServiceRegionId<span class="token punctuation">,</span>\n    TimeZoneId <span class="token operator">=</span> sa<span class="token punctuation">.</span>TimeZoneId<span class="token punctuation">,</span>\n    CreatedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    CreatedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    ModifiedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    ModifiedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    Timestamp <span class="token operator">=</span> sa<span class="token punctuation">.</span>RowVersion<span class="token punctuation">,</span>\n    IsDeleted <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsDeleted\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">return</span> result2<span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="fetchbyregion-regionid"><a class="header-anchor" href="#fetchbyregion-regionid" aria-hidden="true">#</a> <code>FetchByRegion(regionId)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sa <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreas\n  <span class="token keyword">where</span> <span class="token class-name">sa</span><span class="token punctuation">.</span>ServiceRegionId <span class="token operator">==</span> regionId\n    <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>sa<span class="token punctuation">.</span>IsDeleted\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaDTO</span> <span class="token punctuation">{</span>\n    Id <span class="token operator">=</span> sa<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n    Name <span class="token operator">=</span> sa<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n    IsActive <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsActive<span class="token punctuation">,</span>\n    IsCatastropheArea <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsCatastropheArea<span class="token punctuation">,</span>\n    Latitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>Latitude<span class="token punctuation">,</span>\n    Longitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>Longitude<span class="token punctuation">,</span>\n    AddressLatitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>AddressLatitude<span class="token punctuation">,</span>\n    AddressLongitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>AddressLongitude<span class="token punctuation">,</span>\n    Radius <span class="token operator">=</span> sa<span class="token punctuation">.</span>Radius<span class="token punctuation">,</span>\n    Street <span class="token operator">=</span> sa<span class="token punctuation">.</span>StreetAddress<span class="token punctuation">,</span>\n    City <span class="token operator">=</span> sa<span class="token punctuation">.</span>City<span class="token punctuation">,</span>\n    StateId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>sa<span class="token punctuation">.</span>StateId<span class="token punctuation">,</span>\n    PostalCode <span class="token operator">=</span> sa<span class="token punctuation">.</span>PostalCode<span class="token punctuation">,</span>\n    ServiceRegionId <span class="token operator">=</span> sa<span class="token punctuation">.</span>ServiceRegionId<span class="token punctuation">,</span>\n    TimeZoneId <span class="token operator">=</span> sa<span class="token punctuation">.</span>TimeZoneId<span class="token punctuation">,</span>\n    CreatedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    CreatedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    ModifiedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    ModifiedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    Timestamp <span class="token operator">=</span> sa<span class="token punctuation">.</span>RowVersion<span class="token punctuation">,</span>\n    IsDeleted <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsDeleted\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="fetchbyuser-userid"><a class="header-anchor" href="#fetchbyuser-userid" aria-hidden="true">#</a> <code>FetchByUser(userId)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sa <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreas\n  <span class="token keyword">where</span> <span class="token class-name">sa</span><span class="token punctuation">.</span>ServiceAreaTechnicians<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>UserId <span class="token operator">==</span> userId<span class="token punctuation">)</span>\n    <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>sa<span class="token punctuation">.</span>IsDeleted\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaDTO</span> <span class="token punctuation">{</span>\n    Id <span class="token operator">=</span> sa<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n    Name <span class="token operator">=</span> sa<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n    IsActive <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsActive<span class="token punctuation">,</span>\n    IsCatastropheArea <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsCatastropheArea<span class="token punctuation">,</span>\n    Latitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>Latitude<span class="token punctuation">,</span>\n    Longitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>Longitude<span class="token punctuation">,</span>\n    AddressLatitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>AddressLatitude<span class="token punctuation">,</span>\n    AddressLongitude <span class="token operator">=</span> sa<span class="token punctuation">.</span>AddressLongitude<span class="token punctuation">,</span>\n    Radius <span class="token operator">=</span> sa<span class="token punctuation">.</span>Radius<span class="token punctuation">,</span>\n    Street <span class="token operator">=</span> sa<span class="token punctuation">.</span>StreetAddress<span class="token punctuation">,</span>\n    City <span class="token operator">=</span> sa<span class="token punctuation">.</span>City<span class="token punctuation">,</span>\n    StateId <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>sa<span class="token punctuation">.</span>StateId<span class="token punctuation">,</span>\n    PostalCode <span class="token operator">=</span> sa<span class="token punctuation">.</span>PostalCode<span class="token punctuation">,</span>\n    ServiceRegionId <span class="token operator">=</span> sa<span class="token punctuation">.</span>ServiceRegionId<span class="token punctuation">,</span>\n    TimeZoneId <span class="token operator">=</span> sa<span class="token punctuation">.</span>TimeZoneId<span class="token punctuation">,</span>\n    CreatedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    CreatedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    ModifiedBy <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n    ModifiedOn <span class="token operator">=</span> sa<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n    Timestamp <span class="token operator">=</span> sa<span class="token punctuation">.</span>RowVersion<span class="token punctuation">,</span>\n    RegionName <span class="token operator">=</span> sa<span class="token punctuation">.</span>ServiceRegion<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n    IsDeleted <span class="token operator">=</span> sa<span class="token punctuation">.</span>IsDeleted\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="insert-serviceareadto-item"><a class="header-anchor" href="#insert-serviceareadto-item" aria-hidden="true">#</a> <code>Insert(ServiceAreaDTO item)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> newItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceArea</span> <span class="token punctuation">{</span>\n  Name <span class="token operator">=</span> item<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n  StreetAddress <span class="token operator">=</span> item<span class="token punctuation">.</span>Street<span class="token punctuation">,</span>\n  City <span class="token operator">=</span> item<span class="token punctuation">.</span>City<span class="token punctuation">,</span>\n  StateId <span class="token operator">=</span> item<span class="token punctuation">.</span>StateId<span class="token punctuation">,</span>\n  PostalCode <span class="token operator">=</span> item<span class="token punctuation">.</span>PostalCode<span class="token punctuation">,</span>\n  IsActive <span class="token operator">=</span> item<span class="token punctuation">.</span>IsActive<span class="token punctuation">,</span>\n  IsCatastropheArea <span class="token operator">=</span> item<span class="token punctuation">.</span>IsCatastropheArea<span class="token punctuation">,</span>\n  Latitude <span class="token operator">=</span> item<span class="token punctuation">.</span>Latitude<span class="token punctuation">,</span>\n  Longitude <span class="token operator">=</span> item<span class="token punctuation">.</span>Longitude<span class="token punctuation">,</span>\n  Radius <span class="token operator">=</span> item<span class="token punctuation">.</span>Radius<span class="token punctuation">,</span>\n  ServiceRegionId <span class="token operator">=</span> item<span class="token punctuation">.</span>ServiceRegionId<span class="token punctuation">,</span>\n  TimeZoneId <span class="token operator">=</span> item<span class="token punctuation">.</span>TimeZoneId<span class="token punctuation">,</span>\n  CreatedOn <span class="token operator">=</span> item<span class="token punctuation">.</span>CreatedOn<span class="token punctuation">,</span>\n  CreatedBy <span class="token operator">=</span> item<span class="token punctuation">.</span>CreatedBy<span class="token punctuation">,</span>\n  RowVersion <span class="token operator">=</span> item<span class="token punctuation">.</span>Timestamp<span class="token punctuation">,</span>\n  AddressLongitude <span class="token operator">=</span> item<span class="token punctuation">.</span>AddressLongitude<span class="token punctuation">,</span>\n  AddressLatitude <span class="token operator">=</span> item<span class="token punctuation">.</span>AddressLatitude<span class="token punctuation">,</span>\n  IsDeleted <span class="token operator">=</span> item<span class="token punctuation">.</span>IsDeleted\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\nctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreas<span class="token punctuation">.</span><span class="token function">AddObject</span><span class="token punctuation">(</span>newItem<span class="token punctuation">)</span><span class="token punctuation">;</span>\nctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\nitem<span class="token punctuation">.</span>Id <span class="token operator">=</span> newItem<span class="token punctuation">.</span>Id<span class="token punctuation">;</span>\nitem<span class="token punctuation">.</span>Timestamp <span class="token operator">=</span> newItem<span class="token punctuation">.</span>RowVersion<span class="token punctuation">;</span>\n</code></pre></div><h4 id="update-serviceareadto-item"><a class="header-anchor" href="#update-serviceareadto-item" aria-hidden="true">#</a> <code>Update(ServiceAreaDTO item)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> data <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> r <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreas\n  <span class="token keyword">where</span> <span class="token class-name">r</span><span class="token punctuation">.</span>Id <span class="token operator">==</span> item<span class="token punctuation">.</span>Id\n  <span class="token keyword">select</span> r<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DataNotFoundException</span><span class="token punctuation">(</span><span class="token string">&quot;ServiceAreas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span>RowVersion<span class="token punctuation">.</span><span class="token function">Matches</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>Timestamp<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ConcurrencyException</span><span class="token punctuation">(</span><span class="token string">&quot;ServiceAreas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n<span class="token class-name"><span class="token keyword">int</span><span class="token punctuation">?</span></span> state<span class="token punctuation">;</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>StateId <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>\n<span class="token keyword">else</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> item<span class="token punctuation">.</span>StateId<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\ndata<span class="token punctuation">.</span>Name <span class="token operator">=</span> item<span class="token punctuation">.</span>Name<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>StreetAddress <span class="token operator">=</span> item<span class="token punctuation">.</span>Street<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>City <span class="token operator">=</span> item<span class="token punctuation">.</span>City<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>StateId <span class="token operator">=</span> state<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>ServiceRegionId <span class="token operator">=</span> item<span class="token punctuation">.</span>ServiceRegionId<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>TimeZoneId <span class="token operator">=</span> item<span class="token punctuation">.</span>TimeZoneId<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>PostalCode <span class="token operator">=</span> item<span class="token punctuation">.</span>PostalCode<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>Latitude <span class="token operator">=</span> item<span class="token punctuation">.</span>Latitude<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>Longitude <span class="token operator">=</span> item<span class="token punctuation">.</span>Longitude<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>Radius <span class="token operator">=</span> item<span class="token punctuation">.</span>Radius<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>IsCatastropheArea <span class="token operator">=</span> item<span class="token punctuation">.</span>IsCatastropheArea<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>IsActive <span class="token operator">=</span> item<span class="token punctuation">.</span>IsActive<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>RowVersion <span class="token operator">=</span> item<span class="token punctuation">.</span>Timestamp<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>AddressLatitude <span class="token operator">=</span> item<span class="token punctuation">.</span>AddressLatitude<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>AddressLongitude <span class="token operator">=</span> item<span class="token punctuation">.</span>AddressLongitude<span class="token punctuation">;</span>\ndata<span class="token punctuation">.</span>IsDeleted <span class="token operator">=</span> item<span class="token punctuation">.</span>IsDeleted<span class="token punctuation">;</span>\n\n<span class="token class-name"><span class="token keyword">var</span></span> count <span class="token operator">=</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="delete-id-1"><a class="header-anchor" href="#delete-id-1" aria-hidden="true">#</a> <code>Delete(id)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> data <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> r <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreas\n  <span class="token keyword">where</span> <span class="token class-name">r</span><span class="token punctuation">.</span>Id <span class="token operator">==</span> id\n  <span class="token keyword">select</span> r\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreas<span class="token punctuation">.</span><span class="token function">DeleteObject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><h4 id="serviceareaworkload-id"><a class="header-anchor" href="#serviceareaworkload-id" aria-hidden="true">#</a> <code>ServiceAreaWorkLoad(id)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> regions <span class="token operator">=</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceRegionManagers<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>srm <span class="token operator">=&gt;</span> srm<span class="token punctuation">.</span>UserId <span class="token operator">==</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token class-name"><span class="token keyword">var</span></span> data <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> area <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreas\n  <span class="token keyword">where</span> <span class="token class-name">area</span><span class="token punctuation">.</span>IsActive\n    <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>area<span class="token punctuation">.</span>IsDeleted\n    <span class="token operator">&amp;&amp;</span> area<span class="token punctuation">.</span>ServiceRegion<span class="token punctuation">.</span>IsActive\n    <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>area<span class="token punctuation">.</span>ServiceRegion<span class="token punctuation">.</span>IsDeleted\n    <span class="token operator">&amp;&amp;</span> area<span class="token punctuation">.</span>ServiceAreaTechnicians<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>UserId <span class="token operator">==</span> id<span class="token punctuation">)</span>\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaDTO</span> <span class="token punctuation">{</span>\n    Id <span class="token operator">=</span> area<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n    Name <span class="token operator">=</span> area<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n    ServiceRegionId <span class="token operator">=</span> area<span class="token punctuation">.</span>ServiceRegionId<span class="token punctuation">,</span>\n    RegionName <span class="token operator">=</span> area<span class="token punctuation">.</span>ServiceRegion<span class="token punctuation">.</span>Name<span class="token punctuation">,</span>\n    WorkLoad <span class="token operator">=</span> area<span class="token punctuation">.</span>ProjectInspections<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>Project<span class="token punctuation">.</span>ProjectStatusId <span class="token operator">!=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>ProjectStates<span class="token punctuation">.</span>Closed\n    <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">.</span>Project<span class="token punctuation">.</span>ProjectStatusId <span class="token operator">!=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>ProjectStates<span class="token punctuation">.</span>Archived\n    <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">.</span>Project<span class="token punctuation">.</span>ProjectStatusId <span class="token operator">!=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>ProjectStates<span class="token punctuation">.</span>Billed\n    <span class="token operator">&amp;&amp;</span> m<span class="token punctuation">.</span>ProjectInspectionTechnician<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>a <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>Id <span class="token operator">==</span> id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Select</span><span class="token punctuation">(</span>a <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>ProjectId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    Unassignable <span class="token operator">=</span> area<span class="token punctuation">.</span>ServiceAreaTechnicians<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>m <span class="token operator">=&gt;</span> m<span class="token punctuation">.</span>UserId <span class="token operator">==</span> id<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token keyword">return</span> data<span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="fetchserviceareapostalcodes-serviceareaid"><a class="header-anchor" href="#fetchserviceareapostalcodes-serviceareaid" aria-hidden="true">#</a> <code>FetchServiceAreaPostalCodes(serviceAreaId)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> results <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sapc <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaPostalCodes\n  <span class="token keyword">join</span> sa <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreas <span class="token keyword">on</span> sapc<span class="token punctuation">.</span>ServiceAreaId equals sa<span class="token punctuation">.</span>Id\n  <span class="token keyword">where</span> <span class="token class-name">sapc</span><span class="token punctuation">.</span>ServiceAreaId <span class="token operator">==</span> serviceAreaId\n  <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaPostalCodeDTO</span> <span class="token punctuation">{</span>\n    Id <span class="token operator">=</span> sapc<span class="token punctuation">.</span>Id<span class="token punctuation">,</span>\n    PostalCode <span class="token operator">=</span> sapc<span class="token punctuation">.</span>PostalCode<span class="token punctuation">,</span>\n    ServiceAreaId <span class="token operator">=</span> sapc<span class="token punctuation">.</span>ServiceAreaId<span class="token punctuation">,</span>\n    ServiceArea <span class="token operator">=</span> sa<span class="token punctuation">.</span>Name\n  <span class="token punctuation">}</span>\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">OrderBy</span><span class="token punctuation">(</span>p <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>PostalCode<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="insertserviceareapostalcode-serviceareapostalcodedto-serviceareapostalcodedto"><a class="header-anchor" href="#insertserviceareapostalcode-serviceareapostalcodedto-serviceareapostalcodedto" aria-hidden="true">#</a> <code>InsertServiceAreaPostalCode(ServiceAreaPostalCodeDTO serviceAreaPostalCodeDTO)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> newItem <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ServiceAreaPostalCode</span> <span class="token punctuation">{</span>\n  PostalCode <span class="token operator">=</span> serviceAreaPostalCodeDTO<span class="token punctuation">.</span>PostalCode<span class="token punctuation">,</span>\n  ServiceAreaId <span class="token operator">=</span> serviceAreaPostalCodeDTO<span class="token punctuation">.</span>ServiceAreaId\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\nctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaPostalCodes<span class="token punctuation">.</span><span class="token function">AddObject</span><span class="token punctuation">(</span>newItem<span class="token punctuation">)</span><span class="token punctuation">;</span>\nctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre></div><h4 id="deleteserviceareapostalcode-id"><a class="header-anchor" href="#deleteserviceareapostalcode-id" aria-hidden="true">#</a> <code>DeleteServiceAreaPostalCode(id)</code></h4><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> data <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sapc <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaPostalCodes\n  <span class="token keyword">where</span> <span class="token class-name">sapc</span><span class="token punctuation">.</span>Id <span class="token operator">==</span> id\n  <span class="token keyword">select</span> sapc\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaPostalCodes<span class="token punctuation">.</span><span class="token function">DeleteObject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><div class="language-csharp"><pre><code><span class="token class-name"><span class="token keyword">var</span></span> data <span class="token operator">=</span> <span class="token punctuation">(</span>\n  <span class="token keyword">from</span> sapc <span class="token keyword">in</span> ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaPostalCodes\n  <span class="token keyword">where</span> <span class="token class-name">sapc</span><span class="token punctuation">.</span>Id <span class="token operator">==</span> id\n  <span class="token keyword">select</span> sapc\n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token keyword">if</span> <span class="token punctuation">(</span>data <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span>ServiceAreaPostalCodes<span class="token punctuation">.</span><span class="token function">DeleteObject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  ctx<span class="token punctuation">.</span>ObjectContext<span class="token punctuation">.</span><span class="token function">SaveChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre></div><p> </p><table><thead><tr><th>Tables</th><th style="text-align:center;">Are</th><th style="text-align:right;">Cool</th></tr></thead><tbody><tr><td>col 3 is</td><td style="text-align:center;">right-aligned</td><td style="text-align:right;">$1600</td></tr><tr><td>col 2 is</td><td style="text-align:center;">centered</td><td style="text-align:right;">$12</td></tr><tr><td>zebra stripes</td><td style="text-align:center;">are neat</td><td style="text-align:right;">$1</td></tr></tbody></table><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>This is a tip</p></div><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo in todos<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>todo.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\n    {{ todo.text }}\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>\n</code></pre></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>This is a warning</p></div><div class="language-js"><div class="highlight-lines"><br><br><br><div class="highlighted"></div><br><br><br><br></div><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>\n  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">{</span>\n      msg<span class="token operator">:</span> <span class="token string">&#39;Highlighted!&#39;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre></div><div class="danger custom-block"><p class="custom-block-title">WARNING</p><p>This is a dangerous warning</p></div>',120);e.render=function(s,t,e,o,c,i){return n(),a("div",null,[p])};export default e;export{t as __pageData};
